!function(s,e){"use strict";e.utilites.namespace("cherrySearch"),e.cherrySearch={settings:{searchFormWrapperClass:".cherry-search-wrapper",searchFormClass:".cherry-search__form",inputClass:".cherry-search__field",submitClass:".cherry-search__submit",resultsAreaClass:".cherry-search__results-area",listHolderClass:".cherry-search__results-holder",listClass:".cherry-search__results-list",listInnerClass:".cherry-search__results-list-inner",itemClass:".cherry-search__results-item",messageHolder:".cherry-search__message",countClass:".cherry-search__results-count span",navigationClass:".cherry-search__navigation-holder",bulletClass:".cherry-search__bullet-button",bulletActiveClass:".cherry-search__active-button",numberClass:".cherry-search__number-button",prevClass:".cherry-search__prev-button",nextClass:".cherry-search__next-button",spinner:".cherry-search__spinner",fullResult:".cherry-search__full-result",searchHandlerId:"cherry_search_public_action"},init:function(){s("body").on("focus"+this.settings.searchFormWrapperClass,this.settings.inputClass,this.initCherrySearch.bind(this))},initCherrySearch:function(e){var r=s(e.target).closest(this.settings.searchFormWrapperClass);r.cherrySearch(this.settings)}},e.cherrySearch.init(),s.fn.cherrySearch=function(r){var a=this[0],l=r,t=window.cherrySearchMessages,c=null,n=null,i=s(l.resultsAreaClass,a),o=s(l.listHolderClass,i),h=s(l.countClass,i),u=s(l.listClass,i),C=s(l.listInnerClass,i),p=s(l.navigationClass,i),d=s(l.messageHolder,i),m=s(l.spinner,i),_=s(a).data("args")||[],f=0;return a.isInit?"is init: true":(a.isInit=!0,a.inputChangeHandler=function(s){var e=s.target.value;o.removeClass("show"),a.outputMessage("",""),e?(a.showList(),m.addClass("show"),clearTimeout(c),c=setTimeout(function(){_.value=e,a.searchAjaxInstancer.sendData(_)},450)):a.hideList()},a.successCallback=function(s){var e=s.data,r=e.error,l=e.message,c=e.posts,i=null,u="",g="",y="<ul>%s</ul>";if(o.removeClass("show"),m.removeClass("show"),f=0,"error-notice"!==s.type)if(0===e.post_count||r)a.outputMessage(l,"show");else{d.removeClass("show"),n=wp.template("search-form-results-item-"+_.id);for(i in c)g+=n(c[i]),(parseInt(i)+1)%e.limit_query!=0&&parseInt(i)!==c.length-1||(u+=y.replace("%s",g),g="");h.html(e.post_count),C.html(u).attr("data-columns",e.columns),p.html(e.result_navigation),o.addClass("show")}else a.outputMessage(t.serverError,"error show")},a.errorCallback=function(s){"abort"!==s.statusText&&(m.removeClass("show"),a.outputMessage(t.serverError,"error show"))},a.hideList=function(){i.removeClass("show")},a.showList=function(){i.addClass("show")},a.focusHandler=function(){0!==s("ul > li",C).length&&a.showList()},a.outputMessage=function(s,e){d.removeClass("error show").addClass(e).html(s)},a.formClick=function(s){s.stopPropagation()},a.clickFullResult=function(){s(l.searchFormClass,a).submit()},a.changeSlide=function(e){var r=parseInt(s("ul",C).eq(e).position().left)*-1;C.css("left",r+"px"),u.scrollTop(0)},a.clickBulletHandler=function(e){var r=s(e.target),t=l.bulletActiveClass.replace(".","");s(l.bulletActiveClass).removeClass(t),r.addClass(t),a.changeSlide(r.data("number")-1)},a.clickNavigationButtonHandler=function(e){var r=s(e.target).data("direction"),l=C.data("columns");0<=f+r&&l>f+r&&(f+=r,a.changeSlide(f))},a.searchAjaxInstancer=new e.CherryAjaxHandler({handlerId:l.searchHandlerId,successCallback:a.successCallback,errorCallback:a.errorCallback}),s(l.inputClass,a).on("input",a.inputChangeHandler).on("focus",a.focusHandler),s(a).on("click"+l.searchFormWrapperClass,a.formClick).on("click"+l.searchFormWrapperClass,l.fullResult,a.clickFullResult).on("click"+l.searchFormWrapperClass,l.bulletClass,a.clickBulletHandler).on("click"+l.searchFormWrapperClass,l.numberClass,a.clickBulletHandler).on("click"+l.searchFormWrapperClass,l.prevClass,a.clickNavigationButtonHandler).on("click"+l.searchFormWrapperClass,l.nextClass,a.clickNavigationButtonHandler),s("body").on("click"+l.searchFormWrapperClass,a.hideList),void 0)}}(jQuery,window.CherryJsCore);