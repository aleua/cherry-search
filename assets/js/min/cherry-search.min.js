!function(s,e){"use strict";e.utilites.namespace("cherrySearch"),e.cherrySearch={settings:{searchFormWrapperClass:".cherry-search-wrapper",searchFormClass:".cherry-search__form",inputClass:".cherry-search__field",submitClass:".cherry-search__submit",resultsAreaClass:".cherry-search__results-area",listHolderClass:".cherry-search__results-holder",listClass:".cherry-search__results-list",listInnerClass:".cherry-search__results-list-inner",itemClass:".cherry-search__results-item",messageHolder:".cherry-search__message",countClass:".cherry-search__results_count span",navigationClass:".cherry-search__navigation-holder",bulletClass:".cherry-search__bullet-button",bulletActiveClass:".cherry-search__active-button",numberClass:".cherry-search__number-button",prevClass:".cherry-search__prev-button",nextClass:".cherry-search__next-button",spinner:".cherry-search__spinner",moreButton:".cherry-search__more-button",searchHandlerId:"cherry_search_public_action"},init:function(){s("body").on("focus"+this.settings.searchFormWrapperClass,this.settings.inputClass,this.initCherrySearch.bind(this))},initCherrySearch:function(e){var r=s(e.target).closest(this.settings.searchFormWrapperClass);r.cherrySearch(this.settings)}},e.cherrySearch.init(),s.fn.cherrySearch=function(r){var a=this[0],t=r,l=window.cherrySearchMessages,c=null,n=null,o=s(t.resultsAreaClass,a),i=s(t.listHolderClass,o),h=s(t.countClass,o),u=s(t.listClass,o),C=s(t.listInnerClass,o),p=s(t.navigationClass,o),d=s(t.messageHolder,o),m=s(t.spinner,o),_=s(a).data("args")||[],g=0;return a.isInit?"is init: true":(a.isInit=!0,a.inputChangeHandler=function(s){var e=s.target.value;i.removeClass("show"),a.outputMessage("",""),e?(a.showList(),m.addClass("show"),clearTimeout(c),c=setTimeout(function(){_.value=e,a.searchAjaxInstancer.sendData(_)},450)):a.hideList()},a.successCallback=function(s){var e=s.data,r=e.error,t=e.message,c=e.posts,o=null,u="",y="",v="<ul>%s</ul>";if(i.removeClass("show"),m.removeClass("show"),g=0,"error-notice"!==s.type)if(0===e.post_count||r)a.outputMessage(t,"show");else{d.removeClass("show"),n=wp.template("search-form-results-item-"+_.id);for(o in c)y+=n(c[o]),(parseInt(o)+1)%e.limit_query!=0&&parseInt(o)!==c.length-1||(u+=v.replace("%s",y),y="");h.html(e.post_count),C.html(u).attr("data-columns",e.columns),p.html(e.result_navigation),i.addClass("show")}else a.outputMessage(l.serverError,"error show")},a.errorCallback=function(s){"abort"!==s.statusText&&(m.removeClass("show"),a.outputMessage(l.serverError,"error show"))},a.hideList=function(){o.removeClass("show")},a.showList=function(){o.addClass("show")},a.focusHandler=function(){0!==s("ul > li",C).length&&a.showList()},a.outputMessage=function(s,e){d.removeClass("error show").addClass(e).html(s)},a.formClick=function(s){s.stopPropagation()},a.clickMoreButton=function(){s(t.searchFormClass,a).submit()},a.changeSlide=function(e){var r=parseInt(s("ul",C).eq(e).position().left)*-1;C.css("left",r+"px"),u.scrollTop(0)},a.clickBulletHandler=function(e){var r=s(e.target),l=t.bulletActiveClass.replace(".","");s(t.bulletActiveClass).removeClass(l),r.addClass(l),a.changeSlide(r.data("number")-1)},a.clickNavigationButtonHandler=function(e){var r=s(e.target).data("direction"),t=C.data("columns");0<=g+r&&t>g+r&&(g+=r,a.changeSlide(g))},a.searchAjaxInstancer=new e.CherryAjaxHandler({handlerId:t.searchHandlerId,successCallback:a.successCallback,errorCallback:a.errorCallback}),s(t.inputClass,a).on("input",a.inputChangeHandler).on("focus",a.focusHandler),s(a).on("click"+t.searchFormWrapperClass,a.formClick).on("click"+t.searchFormWrapperClass,t.moreButton,a.clickMoreButton).on("click"+t.searchFormWrapperClass,t.bulletClass,a.clickBulletHandler).on("click"+t.searchFormWrapperClass,t.numberClass,a.clickBulletHandler).on("click"+t.searchFormWrapperClass,t.prevClass,a.clickNavigationButtonHandler).on("click"+t.searchFormWrapperClass,t.nextClass,a.clickNavigationButtonHandler),s("body").on("click"+t.searchFormWrapperClass,a.hideList),void 0)}}(jQuery,window.CherryJsCore);